function v(s,e,t,i,l,c,o,f){var n=typeof s=="function"?s.options:s;e&&(n.render=e,n.staticRenderFns=t,n._compiled=!0),i&&(n.functional=!0),c&&(n._scopeId="data-v-"+c);var a;if(o?(a=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),l&&l.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(o)},n._ssrRegister=a):l&&(a=f?function(){l.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:l),a)if(n.functional){n._injectStyles=a;var p=n.render;n.render=function(d,h){return a.call(h),p(d,h)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,a):[a]}return{exports:s,options:n}}const g={mixins:[Fieldtype],data(){return{observer:null,options:[],results:[],limit:30,searchTerm:""}},computed:{selectedOption(){var s;return(s=this.results)==null?void 0:s.find(e=>e.value===this.value)},paginated(){return this.results.slice(0,this.limit)},hasNextPage(){return this.paginated.length<this.results.length}},mounted(){this.observer=new IntersectionObserver(this.infiniteScroll)},methods:{async onSearch(s,e){this.searchTerm=s,s.length&&(e(!0),this.search(e,s,this))},async onOpen(){this.hasNextPage&&(await this.$nextTick(),this.observer.observe(this.$refs.loadMore))},onClose(){this.observer.disconnect()},search:_.debounce(async(s,e,t)=>{t.keyword=null;const i=new URLSearchParams;return i.set("query",e),i.set("limit",999),t.config.icon_group_restrictions.length&&i.set("prefixes",t.config.icon_group_restrictions.join(",")),fetch(`https://api.iconify.design/search?${i.toString()}`).then(async l=>{l.json().then(c=>{t.results=c.icons.map(o=>({src:`https://api.iconify.design/${o.split(":")[0]}/${o.split(":")[1]}.svg`,value:o,label:o,icon:o}))}).then(async()=>{t.hasNextPage&&(await t.$nextTick(),t.observer.observe(t.$refs.loadMore))}),s(!1)})},350),async infiniteScroll([{isIntersecting:s,target:e}]){if(s){const t=e.offsetParent,i=e.offsetParent.scrollTop;this.limit+=30,await this.$nextTick(),t.scrollTop=i}},focus(){this.$refs.input.focus()},vueSelectUpdated(s){s?((this.config.storage_options==="both"||this.config.storage_options==="url")&&this.update({iconPrefix:s.value.split(":")[0],iconName:s.value.split(":")[1],iconUrl:s.src,iconSvg:null,label:s.value}),(this.config.storage_options==="both"||this.config.storage_options==="svg")&&fetch(`${s.src}?width=unset&height=unset`).then(e=>e.text()).then(e=>{this.update({iconName:s.value,iconUrl:this.config.storage_options==="both"?s.src:null,iconSvg:e,label:s.value})})):this.update(null)}}};var m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex icons-plus"},[e.value?t("div",{staticClass:"flex flex-col gap-2 justify-center items-center"},[t("div",{staticClass:"flex w-full justify-end"},[t("button",{staticClass:"text-red-500",on:{click:function(i){return e.update(null)}}},[t("img",{staticClass:"h-4 w-4",attrs:{src:"https://api.iconify.design/bx/x.svg?color=%23ba3329",alt:"delete"}})])]),e.value.iconUrl?t("img",{staticClass:"w-24 h-24",attrs:{src:e.value.iconUrl}}):t("div",{staticClass:"w-24 h-24",domProps:{innerHTML:e._s(e.value.iconSvg)}}),t("div",{staticClass:"text-center text-sm"},[e._v(e._s(e.value.label))])]):e._e(),t("v-select",{directives:[{name:"show",rawName:"v-show",value:!e.value,expression:"! value"}],ref:"input",staticClass:"w-full",attrs:{clearable:"",name:e.name,disabled:e.config.disabled||e.isReadOnly,options:e.paginated,placeholder:e.__(e.config.placeholder||"Search..."),searchable:!0,value:e.value,multiple:!1,"close-on-select":!0,filterable:!1},on:{input:e.vueSelectUpdated,open:e.onOpen,close:e.onClose,search:e.onSearch,"search:focus":function(i){return e.$emit("focus")},"search:blur":function(i){return e.$emit("blur")}},scopedSlots:e._u([{key:"no-options",fn:function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.searchTerm.length===0,expression:"searchTerm.length === 0"}],staticClass:"py-3"},[e._v(" Type to search for icons! ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.searchTerm.length!==0,expression:"searchTerm.length !== 0"}],staticClass:"py-3"},[e._v(" No results exist! ")])]},proxy:!0},{key:"option",fn:function(i){return[t("div",{staticClass:"flex items-center justify-center flex-col"},[t("img",{staticClass:"w-12 h-12",attrs:{src:i.src}}),e._v(" "+e._s(i.label)+" ")])]}},{key:"list-footer",fn:function(){return[t("li",{directives:[{name:"show",rawName:"v-show",value:e.hasNextPage,expression:"hasNextPage"}],ref:"loadMore",staticClass:"loader col-span-3 text-center italic text-gray-600 text-sm p-3",staticStyle:{"grid-column":"span 3 / span 3"}},[e._v(" Loading more icons... ")])]},proxy:!0}])})],1)},y=[],b=v(g,m,y,!1,null,null,null,null);const w=b.exports;Statamic.$components.register("icons_plus-fieldtype",w);
